<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'Win32||'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x86-windows</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'Win32|Windows Store|10.0'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x86-uwp</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == '||'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x86-windows</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == '|Windows Store|10.0'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x86-uwp</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'x64||'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x64-windows</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'arm||'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">arm-windows</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'arm64||'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">arm64-windows</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>  

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'x64|Windows Store|10.0'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">x64-uwp</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'arm|Windows Store|10.0'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">arm-uwp</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Platform)|$(ApplicationType)|$(ApplicationTypeRevision)' == 'arm64|Windows Store|10.0'">
    <@PACKAGEID@VcpkgEnabled Condition="'$(@PACKAGEID@VcpkgEnabled)' == ''">true</@PACKAGEID@VcpkgEnabled>
    <@PACKAGEID@VcpkgTriplet Condition="'$(@PACKAGEID@VcpkgTriplet)' == ''">arm64-uwp</@PACKAGEID@VcpkgTriplet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(@PACKAGEID@VcpkgEnabled)' == 'true'">
    <@PACKAGEID@VcpkgConfiguration Condition="'$(@PACKAGEID@VcpkgConfiguration)' == ''">$(Configuration)</@PACKAGEID@VcpkgConfiguration>
    <@PACKAGEID@VcpkgNormalizedConfiguration Condition="$(@PACKAGEID@VcpkgConfiguration.StartsWith('Debug'))">Debug</@PACKAGEID@VcpkgNormalizedConfiguration>
    <@PACKAGEID@VcpkgNormalizedConfiguration Condition="$(@PACKAGEID@VcpkgConfiguration.StartsWith('Release')) or '$(@PACKAGEID@VcpkgConfiguration)' == 'RelWithDebInfo' or '$(@PACKAGEID@VcpkgConfiguration)' == 'MinSizeRel'">Release</@PACKAGEID@VcpkgNormalizedConfiguration>
    <@PACKAGEID@VcpkgRoot Condition="'$(@PACKAGEID@VcpkgRoot)' == ''">$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), .vcpkg-root))\installed\$(@PACKAGEID@VcpkgTriplet)\</@PACKAGEID@VcpkgRoot>
    <@PACKAGEID@VcpkgApplocalDeps Condition="'$(@PACKAGEID@VcpkgApplocalDeps)' == ''">true</@PACKAGEID@VcpkgApplocalDeps>
  </PropertyGroup>

  <ItemDefinitionGroup Condition="'$(@PACKAGEID@VcpkgEnabled)' == 'true'">
    <Link>
      <AdditionalDependencies Condition="'$(@PACKAGEID@VcpkgNormalizedConfiguration)' == 'Debug' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(@PACKAGEID@VcpkgRoot)debug\lib\*.lib</AdditionalDependencies>
      <AdditionalDependencies Condition="'$(@PACKAGEID@VcpkgNormalizedConfiguration)' == 'Release' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(@PACKAGEID@VcpkgRoot)lib\*.lib</AdditionalDependencies>
      <AdditionalLibraryDirectories Condition="'$(@PACKAGEID@VcpkgNormalizedConfiguration)' == 'Release'">%(AdditionalLibraryDirectories);$(@PACKAGEID@VcpkgRoot)lib;$(@PACKAGEID@VcpkgRoot)lib\manual-link</AdditionalLibraryDirectories>
      <AdditionalLibraryDirectories Condition="'$(@PACKAGEID@VcpkgNormalizedConfiguration)' == 'Debug'">%(AdditionalLibraryDirectories);$(@PACKAGEID@VcpkgRoot)debug\lib;$(@PACKAGEID@VcpkgRoot)debug\lib\manual-link</AdditionalLibraryDirectories>
    </Link>
    <ClCompile>
      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(@PACKAGEID@VcpkgRoot)include</AdditionalIncludeDirectories>
    </ClCompile>
    <ResourceCompile>
      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(@PACKAGEID@VcpkgRoot)include</AdditionalIncludeDirectories>
    </ResourceCompile>
  </ItemDefinitionGroup>

  <Target Name="@PACKAGEID@VcpkgTripletSelection" BeforeTargets="ClCompile">
    <Message Text="Using triplet &quot;$(@PACKAGEID@VcpkgTriplet)&quot; from &quot;$(@PACKAGEID@VcpkgRoot)&quot;" Importance="Normal" Condition="'$(@PACKAGEID@VcpkgEnabled)' == 'true'"/>
    <Message Text="Not using Vcpkg because @PACKAGEID@VcpkgEnabled is &quot;$(@PACKAGEID@VcpkgEnabled)&quot;" Importance="Normal" Condition="'$(@PACKAGEID@VcpkgEnabled)' != 'true'"/>
    <Message Text="Vcpkg is unable to link because we cannot decide between Release and Debug libraries. Please define the property @PACKAGEID@VcpkgConfiguration to be 'Release' or 'Debug' (currently '$(@PACKAGEID@VcpkgConfiguration)')." Importance="High" Condition="'$(@PACKAGEID@VcpkgEnabled)' == 'true' and '$(@PACKAGEID@VcpkgNormalizedConfiguration)' == ''"/>
  </Target>

  <Target Name="@PACKAGEID@AppLocalFromInstalled" AfterTargets="CopyFilesToOutputDirectory" BeforeTargets="CopyLocalFilesOutputGroup;RegisterOutput" Condition="'$(@PACKAGEID@VcpkgEnabled)' == 'true' and '$(@PACKAGEID@VcpkgApplocalDeps)' == 'true'">
    <WriteLinesToFile
    File="$(TLogLocation)$(ProjectName).write.1u.tlog"
    Lines="^$(TargetPath);$([System.IO.Path]::Combine($(ProjectDir),$(IntDir)))vcpkg.applocal.log" Encoding="Unicode"/>
    <Exec Condition="$(@PACKAGEID@VcpkgConfiguration.StartsWith('Debug'))"
      Command="$(SystemRoot)\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -noprofile -File %22$(MSBuildThisFileDirectory)applocal.ps1%22 %22$(TargetPath)%22 %22$(@PACKAGEID@VcpkgRoot)debug\bin%22 %22$(TLogLocation)$(ProjectName).write.1u.tlog%22 %22$(IntDir)vcpkg.applocal.log%22"
      StandardOutputImportance="Normal">
    </Exec>
    <Exec Condition="$(@PACKAGEID@VcpkgConfiguration.StartsWith('Release'))"
      Command="$(SystemRoot)\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -noprofile -File %22$(MSBuildThisFileDirectory)applocal.ps1%22 %22$(TargetPath)%22 %22$(@PACKAGEID@VcpkgRoot)bin%22 %22$(TLogLocation)$(ProjectName).write.1u.tlog%22 %22$(IntDir)vcpkg.applocal.log%22"
      StandardOutputImportance="Normal">
    </Exec>
    <ReadLinesFromFile File="$(IntDir)vcpkg.applocal.log">
      <Output TaskParameter="Lines" ItemName="@PACKAGEID@VcpkgAppLocalDLLs" />
    </ReadLinesFromFile>
    <Message Text="@(@PACKAGEID@VcpkgAppLocalDLLs,'%0A')" Importance="Normal" />
    <ItemGroup>
      <ReferenceCopyLocalPaths Include="@(@PACKAGEID@VcpkgAppLocalDLLs)" />
    </ItemGroup>
  </Target>
</Project>
